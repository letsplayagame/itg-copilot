<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITG CoPilot - Trading Session</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="demon-finder">
            <div class="header">
                <h1 class="title">DEMON FINDER</h1>
                <div class="time-section">
                    <div id="current-time" class="time">
                        15:20 ET
                    </div>
                </div>
                <button class="reset-btn" onclick="resetCounts()">Reset</button>
            </div>
            <div class="summary-bar">
                Total mistakes today: <span id="mistake-summary">0</span>
            </div>
            <div class="table-container">
                <table id="demonTable">
                    <thead>
                        <tr>
                            <th>DEMON #</th>
                            <th class="demon-number">1</th>
                            <th class="demon-number">2</th>
                            <th class="demon-number">3</th>
                            <th class="demon-number">4</th>
                            <th class="demon-number">5</th>
                            <th class="demon-number">6</th>
                            <th class="demon-number">7</th>
                            <th class="demon-number">8</th>
                            <th class="demon-number">9</th>
                            <th class="stop-trading">⚠ STOP TRADING ⚠</th>
                        </tr>
                    </thead>
                    <tbody id="demonTableBody">
                        <!-- Rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        const mistakes = [
            'POOR RISK/REWARD TRADE',
            'ENTERED TOO SOON',
            'ENTERED TOO LATE',
            'EXITED TOO SOON',
            'EXITED TOO LATE',
            'TRADE NOT IN TRADING PLAN',
            'INCORRECT STOP PLACEMENT',
            'WRONG POSITION SIZE',
            "DIDN'T TAKE PLANNED TRADE"
        ];

        let mistakeCounts = {};

        function initializeCounts() {
            mistakes.forEach(mistake => {
                mistakeCounts[mistake] = 0;
            });
        }

        function updateMistakeSummary() {
            const totalMistakes = Object.values(mistakeCounts).reduce((a, b) => a + b, 0);
            document.getElementById('mistake-summary').textContent = totalMistakes;
        }

        function createTable() {
            const tbody = document.getElementById('demonTableBody');
            tbody.innerHTML = '';
            
            mistakes.forEach(mistake => {
                const row = document.createElement('tr');
                
                // Mistake name cell
                const mistakeCell = document.createElement('td');
                mistakeCell.className = 'mistake-cell';
                mistakeCell.textContent = mistake;
                mistakeCell.onclick = () => incrementCount(mistake);
                row.appendChild(mistakeCell);

                // Count cells
                for (let i = 0; i < 9; i++) {
                    const cell = document.createElement('td');
                    cell.className = 'checkmark';
                    cell.textContent = i < mistakeCounts[mistake] ? '✓' : '';
                    row.appendChild(cell);
                }

                // Stop trading cell
                const stopCell = document.createElement('td');
                stopCell.className = 'stop-trading';
                stopCell.textContent = mistakeCounts[mistake] >= 9 ? '⚠' : '';
                row.appendChild(stopCell);

                tbody.appendChild(row);
            });
            
            updateMistakeSummary();
        }

        function incrementCount(mistake) {
            if (mistakeCounts[mistake] < 9) {
                mistakeCounts[mistake]++;
                createTable();
            }
        }

        function resetCounts() {
            mistakes.forEach(mistake => {
                mistakeCounts[mistake] = 0;
            });
            createTable();
        }

        function updateTime() {
            const now = new Date();
            const et = new Intl.DateTimeFormat('en-US', {
                timeZone: 'America/New_York',
                hour: '2-digit',
                minute: '2-digit',
                hour12: false
            }).format(now);
            document.getElementById('current-time').textContent = `${et} ET`;
        }

        // Initialize the application
        initializeCounts();
        createTable();
        setInterval(updateTime, 1000);
        updateTime();
    </script>
</body>
</html>
